\section{The A3-E Model}\label{sec:proposal}

\begin{figure}[tbp]
	\includegraphics[width=1\textwidth]{figs/A3-E-model.pdf}
	\caption{The A3-E Model.}
	\label{fig:A3-E-model}
\end{figure}

As depicted in Fig.~\ref{fig:A3-E-model}, the A3-E model consists of the different actors and mechanisms required for the realization of the cloud-edge-mobile continuum. Its name inherits from the four phases process -- namely, \textit{(\textbf{A}wareness), (\textbf{A})cquisition, (\textbf{A})llocation, and (\textbf{E})ngagement}. Each phase encompasses activities that take care of specific concerns in the interaction among client applications and the constituents of the continuum. To address the continuum heterogeneity, the A3-E process is flexible with respect to which phases are employed and how they are employed.

The A3-E model also encompasses the concepts of client applications, requests, requirements, services, and domains. The later provides an abstraction of whatever computational resources can be employed by different computing platforms (i.e., those used by cloud, mobile-edge, local-edge, and mobile devices). Moreover, the model includes a client-side and a domain-side middlewares implementing the A3-E process. In specific, the client middleware is responsible for handling client application requests and forwarding them to the domain that best satisfies the client application requirements.  In turn, the domain middleware is responsible for the self-management of services life-cycle in a given domain. Finally, the constituents of the continuum (i.e., cloud datacenters, edge servers, and mobile devices) are respectively represented in the model by the cloud-domain, edge-domain, and mobile-domain. Each domain contains its own and potentially heterogeneous pool of computational resources.

%whose instances are employed by clients and the different types of computational resources composing the continuum. 

Next, we describe the four phases depicted in Fig.~\ref{fig:A3-E-process}, which represents the A3-E process with its four phases. Along their description, the possible instances of the process are mapped to distinct scenarios of the compute continuum, including those in which one or more phases are not employed.

%\subsection{A3-E Process: Phases}\label{sec:A3-E-process}

%Next, the four A3-E phases are further described and mapped to the requirements elicited in  Section~\ref{sec:requirements}. Later on, other possible instances of the A3-E model are correlated with scenarios of the compute continuum.

\subsection{Engagement Phase}\label{sec:A3-E-engagement}

The \textit{engagement} phase models the interaction between a client application and a domain in the continuum. At this stage, the application request has been handled and parsed by the client-side middleware (CSM). Also, the CSM must have chosen the best domain alternative among those available. Finally, the selected domain must be ready to process the requests.

In order to overcome the heterogeneity of the continuum, A3-E adheres to the use of service-orientation in which clients engage with remote \textit{services} (i.e., cloud and edge-based services) by means of a request/response protocol (e.g., RESTful services over HTTP). In contrast, computation provided by mobile devices can be accessed by means of local calls. Notwithstanding this, to enforce a common interface between clients and the heterogeneous domains, mobile devices should also expose computation that may be offloaded as services. 

\begin{figure}[tbp]
	\includegraphics[width=0.95\textwidth]{figs/A3-E-process}
	\caption{The A3-E Process. Phases are delimited by vertical lines and the main activity of each phase by the label within each phase; labels within parenthesis represent the states of a domain to a client (and vice-versa)}
	\label{fig:A3-E-process}
\end{figure}

\subsection{Allocation Phase}\label{sec:A3-E-allocation}

\begin{figure}[thbp]
	\centering
	\captionsetup[subfigure]{width=0.4\textwidth}	
	\null\hfill
	\subfloat[Services allocation control loop; domains must monitor the QoS of deployed services and adapt its allocation scheme to prevent SLA violation.\label{fig:service-allocation-loop}]{ \includegraphics[width=0.4\textwidth]{figs/service-allocation-loop}}
	\captionsetup[subfigure]{width=0.4\textwidth}	
	\hfill
	\subfloat[Domain selection control loop; clients must monitor available domains and select the one that best satisfies its requirements.\label{fig:domain-selection-loop}] {\includegraphics[width=0.4\textwidth]{figs/domain-selection-loop}}
	\hfill\null
	\caption{Self-management control loops for service allocation and domain selection}\label{fig:allocation-loops}
\end{figure}

From the domain side, the allocation phase models the allocation of runtime resources needed for the execution of services. Cloud domains traditionally employ automated scaling mechanisms, e.g, with the allocation of virtual machines and container instances on demand. More recently, cloud-based FaaS platforms (e.g., Amazon Lambda, Google Cloud Functions) extend these mechanisms to stateless functions. The later represent an extreme type of allocation in which no pre-allocation of resources is needed and functions are executed by a shared runtime platform. Accordingly, A3-E addresses efficiency required by resource-constrained edge domains by adhering to the FaaS execution model.
%in which stateless functions can be deployed and scaled on demand without minimum pre-allocation of resources. 
Finally, mobile domains do not implement the allocation phase, as in this work we assume that local services to be allocated along with the client application.

The allocation phase is realized by DSM with a self-management loop~\cite{kephart2003vision} (Fig.~\ref{fig:service-allocation-loop}) in which computational resources are allocated and deallocated according to: a) the monitored QoS os services provided by the domain; and b) the SLA between the domain provider and client applications. In specific, domains with limited resources must take into account the priority given to applications with SLA demanding higher levels of availability. For instance, edge domains could support two types of SLA: one for critical applications featuring high availability of services; and another for non-critical applications featuring an opportunistic provisioning of services. The first type would require services to be always available, whilst the later would guarantee a minimum probability of services availability. As an example, connected vehicles could feature a hight availability SLA and always be available, while an augmented reality application for guiding tourists could have an opportunistic SLA. During rush hours, edge services may become unavailable for the AR application, which would rely on local computation (incurring in battery drain) and/or cloud-based services (incurring in network latency). In all other moments, the AR would be able to rely on edge-based services. 

%2) the allocation policy employed by the domain; and 3) the availability of resources. 

From the client-side, the allocation phase models the selection of the domain best satisfying the client application requirements for a given service. This decision takes into account a list of available domains and respective QoS attributes. In specific, this phase is realized by the CSM with a self-management control loop (Fig.~\ref{fig:domain-selection-loop}) in which the client checks for the QoS levels of each available domain and decides for the alternative that best satisfies its requirements. This sub-process is the main client-side activity required for the realization of the continuum, as it allows clients to seamlessly alternate among different continuum domains according to the context. For example, upon unavailability of edge domains, the AR application previously introduced would have to choose among local or cloud domain. If the application requirements prioritizes low battery consumption, it should opt for the local domain. Otherwise, if low latency is the priority requirement, it should opt for the cloud domain. As the number of requirements grow, a multi-objective algorithm may be employed to decide among alternative domains.



%The allocation phase has the following purposes: 1) to enable the efficient (Req. \textbf{R1.1}) and automated (Req. \textbf{R3.1}) allocation of domains' computational resources; and to enable clients to choose the best candidate among different available domains (Req. \textbf{R2.1}).



\subsection{Acquisition Phase}\label{sec:A3-E-acquisition}

%The Acquisition phase has the following purposes: 1) to enable the efficient (Req. \textbf{R1.2}) and automated (Req. \textbf{R3.2}) download and installation of service artifacts; and 2) to enable clients to identify, among the known domains, those compatible with their requirements (Req. \textbf{R2.1}).

From the domain side, the allocation phase models the acquisition of service artifacts upon identification of requirements from a given application. To the best of our knowledge, the automated acquisition in today's IaaS providers is limited to the replication of virtual machines and containers in which services are already deployed as full applications. Cloud-based FaaS platforms supports the upload of functions from automated process, i.e., the process is performed from outside the domain. In contrast, the acquisition phase aims to enable the automated download and installation of service artifacts by a given domain. 

The ultimate goal of a dynamic and automated allocation is to mitigate the usage of domain resources before actual demand and, more importantly, encapsulate this operational aspect from domain administrators. The later are fundamental for the realization of finely distributed edge domains, specially those integrated to local network infrastructures. In addition, cloud domains may also benefit from the automated acquisition of services artifacts to address scenarios in which client applications may opportunistically rely on cloud-based services. Finally, mobile domains are exempt of dynamic allocation as local services artifacts are assumed to be part of the client application. 

%In particular, this phase targets f featuring. Despite the abundance of resources, cloud domains may also benefit from an automated acquisition.

%Finally, in this work we assume that local services are deployed along with the client application.

The allocation phase is realized by the DSM with the following process: the domain receives from the CSM the set of application requirements --- namely, the services it needs to be installed and a repository URL from which their corresponding artifacts can be downloaded. Throughout the services life-cycle in the domain, the DSM also checks for new versions of acquired services from the same repositories and updates them accordingly. As an example, a real-time translation application featuring translations from/to streams of different spoken languages require services with low-latency. Instead of having all artifacts pre-installed, edge domains acquire the data and codebase from the application repository upon detection of an user in their coverage area. The setup process takes no more than a minute, during which the user is informed about the setup process. Once ready, the application start streaming captured conversation to edge services, which in turn reply with a translated audio stream. 


%In case the service has already been acquired or as the acquisition finishes, clients should add that domain to their list of available domains. 
From the clients perspective, acquisition is modeled by the simple addition of a domain to a list of available domains, which should follow the identification of the domain's capability in providing the requested service(s). The later is realized by the CSM with the following sub-process: 

%From the domain side, the lack of acquisition implies that service assets must be previously made available. Nonetheless, the preliminary acquisition of a large number of assets is limited by the domain storage capability. 

%Conversely, the automated and opportunistic acquisition of service assets improves storage efficiency with the cost of a setup time $\Delta_{AQ}$. For instance, domains that become aware of clients' requirements may pro-actively start the acquisition phase and become ready for allocation before the first service request arrives.

%otherwise, domains must rely on the detection of a first service request or some other triggering condition to start the acquisition phase and, after setup time $\Delta_A$, become ready for allocation. 


\subsection{Awareness Phase}\label{sec:A3-E-awareness}



%Why do we need awareness?
%CA: awareness is not needed because the edge domain should always be coupled to the network infrastructure; network components shoudl aways route traffic to existing edge servers; additionally, the edge domain should be able to acquire and allocate services upon detection of the first requests.  
%A: A3-E model is agnostic w.r.t. the use of network technologies to route traffic to the edge servers; a given domain my count on network components to traffic route to its servers instead of negociating directly with clients aware of its existance; nonetheless, the lack of awareness limits the acquisition and deployment of services to reactive, as the domain would only identify a given service upon the first request has been made. Clients, in the other hand, would not be able to choose from alternative domains. 

Finally, the Awareness phase has the following purposes: 1) to enable domains to pro-actively initialize the acquisition and allocation phases based on its 
awareness of applications whose hosting devices happens to be in the domain coverage area (Req.~\textbf{R2.3}); and 2) to enable clients to discover the address of local domains (Req.~\textbf{R2.2}).

From the domains perspective, the awareness of clients presence in their coverage area allows a proactive download and installation of services artifacts (acquisition phase) and/or the allocation of services (allocation phase) potentially before a first request to that service arrives, alleviating the delay introduced by services setup.  From the clients perspective, the awareness phase increases the range of alternatives from the continuum that can be used to satisfy their requirements.

%Such behavior allows that are opportunistically acquired and/or allocated to mitigate their setup delay by triggering these phases upon awareness of client(s) in their coverage area.

%From the domain side, the lack of awareness of clients in the domain coverage area prevents triggering the acquisition and subsequently allocation phases based on this event. From the client side, the lack of awareness from surrounding domains prevents them to make the decision of which domains to use. In the later case, clients must rely on external components to reach servers (e.g., traffic managers and DNS servers).

\input{sections/policies}

\subsection{A3-E Instances in the Continuum}

\begin{center}
	\begin{table}[htbp]
		\small
		\caption{Domain-side instances of the A3-E model corresponding to domain variations (D.V.) in the continuum along with: execution model (E.M.), awareness mechanisms (\textbf{W}ell-\textbf{K}nown-\textbf{N}ame or \textbf{A}dvertisement\&\textbf{D}iscovery), and transition policies (\textbf{P}roactive, \textbf{S}equential, \textbf{R}eactive). }\label{tab:A3-E-instances}
		\begin{tabular}{ c c c c c c }
			\toprule
			
			D.V. & E.M. & \textbf{A}WARENESS & \textbf{A}CQUISITION	& \textbf{A}LLOCATION 	& \textbf{E}NGAGEMENT  	\\
			
			\midrule
			
			\multirow{2}{*}{ Cloud }
			& IaaS	& W.K.N.	& OFFLINE		& HOT-START	& BY REQUEST\\
			& FaaS		& W.K.N.	& OFFLINE		& COLD-START	& BY REQUEST\\\midrule					
			\multirow{2}{*}{ Edge }
			& FaaS		& W.K.N.	& [P, R]		& [P, S, R] 	& BY REQUEST\\
			& FaaS		& A\&D	& [P, S, R]		& [P, S, R]		& BY REQUEST\\\midrule	
			\multirow{1}{*}{ Mobile }
			& FaaS	& LOCAL  & OFFLINE	& HOT-START 	& BY REQUEST\\
			
			\bottomrule
		\end{tabular}
	\end{table}
\end{center}
\normalsize

Table~\ref{tab:A3-E-instances} correlates the possible instances of the A3-E model with different domains composing the cloud-edge-mobile continuum. Each instance is described  along with the employed awareness mechanism, execution model, and transition policies~\footnote{The policy adopted by a phase affects which policies may be adopted by its subsequent phase (e.g., a reactive acquisition implies a reactive allocation, as service assets must first be acquired before been deployed, whilst a proactive acquisition may be combined with a reactive allocation).} that may be adopted in each case. 

By taking into account the conflicting properties of \textit{efficiency} and \textit{delay}, we envision the following mapping between A3-E instances and application scenarios of the continuum:

--- \textbf{Cloud-IaaS}. Services hosted in the cloud are, in most of the cases, reachable by means of a well-known Internet name (therefore, no dynamic awareness is employed). Assets used by these services are preliminarily deployed to cloud servers (thus, no dynamic acquisition is employed). Virtual machines and containers are pre-allocated (hot start), and cloud's elasticity mechanisms take care of the (de)allocation of resources according to a service level agreement (SLA). Finally, cloud services are invoked by clients (engagement phase). Target services: delay-tolerant and stateful computation; persistence.

--- \textbf{Cloud-FaaS}. The FaaS model distinguishes from the cloud instance described above by enforcing the use of stateless functions that can be quickly allocated for execution without minimum pre-allocation (cold start). Targeted services: delay-tolerant and stateless computation.

--- \textbf{Edge-Opportunistic}. Services hosted in the edge, in contrast, may need to opportunistically advertise their existence (awareness phase), acquire application assets (acquisition phase), make them ready for invocation (allocation phase), before finally been able to expose the required computation as services to be consumed. In this case, the policies employed for acquisition and allocation may vary between proactive, sequential, or reactive. Targeted services: non-critical applications with desirable requirements for low-latency.

--- \textbf{Edge-Critical}. The later modality of edge computing may co-exist with others in which: 1) services are transparently accessed through well-known Internet names; 2) service assets are pre-acquired (offline acquisition); and 3) services are pre-allocated in order to increase the readiness required by certain types of applications (hot start). Targeted services: critical applications with strict requirements for low-latency.

--- \textbf{Mobile}. This last instance represents the local computation performed by mobile devices. It provides a zero network latency with high availability; in contrast, the resource constraints of mobile devices may result in lower processing performance and undesirable battery drain, therefore justifying the use of other instances (mobile computation offloading), unless none is available. Targeted services: latency-sensitive and lightweight computation.


%
%\subsection{Reference Architecture}
%
%\begin{figure}[tbp]
%	\includegraphics[width=.95\textwidth]{figs/A3-E-reference-architecture}
%	\caption{A3-E architecture in Mobile Devices and Edge Domains}
%	\label{fig:reference-architecture}
%	\end{figure}
	
