\section{Proposal}\label{sec:proposal}

\include{sections/requirements}

\subsection{The A3-E Model}

\begin{figure}
	\includegraphics[width=0.9\textwidth]{figs/A3-E.png}
	\caption{Different phases of the A3-E model; phases are delimited by vertical lines and the main activity of each phase by the label within each phase; labels within parenthesis represent the states of a domain (client) with respect to a client (domain)}
	\label{fig:A3-E-phases}
\end{figure}

\begin{center}
	\begin{table}[th]
		\caption{Oi tabela}\label{tab:A3-E-instances}
		\begin{tabular}{ c c c c c }
			\toprule
			& \textbf{A}WARENESS & \textbf{A}CQUISITION 	& \textbf{A}LLOCATION 	& \textbf{E}NGAGEMENT 	\\
			\midrule
			Cloud	& ---		& ---			& X			& X			\\
			Mobile Edge	& ---		& X				&	X			& X			\\
			Indoor Edge	& X			& X				&	X			& X			\\
			\bottomrule
		\end{tabular}
	\end{table}
\end{center}


%To address the requirements R[1-8], we propose a unified model from which concrete models corresponding to different scenarios of edge computing are later instantiated. First, the interaction between potential clients and edge servers is decomposed into phases (Section~\ref{sec:a3-e-phases}). 

%Each phase is characterized by a main activity from both sides. These activities are later refined with an activity diagram (Section~\ref{sec:a3-e-activities}). Finally, a reference architecture is provided (Section~\ref{sec:a3-e-reference-architecture}).

%For instance, an edge domain could be composed of a grid of powerful servers at a cellular base station or a single cloudlet unit at some public event area. Also, it could be one or more single-board computer in a working office. 

The A3-E provisioning model consists of four phases: \textit{(\textbf{A}wareness), (\textbf{A})cquisition, (\textbf{A})llocation, and (\textbf{E})ngagement}. Each of these phases encompasses activities that take care of specific concerns in the interaction among clients and different types of server infrastructure. 

%A3-E addresses all actors in the computational continuum formed by mobile devices, edge, and cloud servers. 

A3-E model is flexible with respect to its constituting phases and addresses all the constituents of the computational continuum. In specific, the diagram in Fig.~\ref{fig:A3-E-model} represents the scenario in which an edge domain first contacts an application hosted by a mobile client. This instance of the A3-E model is used to illustrate the use of all four phases in the model. In addition to this, Table~\ref{tab:A3-E-instances} correlates other possible instances of the A3-E model with scenarios of the mobile-edge-cloud continuum, namely:

%Later in this section, it will be explained how both mobile and cloud alternatives are considered by the \textit{selection} activity of the client's allocation phase.


%Thus, whereas the \textit{engagement} phase represents the core of the interaction between clients and servers and the \textit{allocation} phase is already part of today's cloud computing, the additional phases of \textit{acquisition} and \textit{awareness} address the particularities of different types of edge computing.


--- Cloud services are reachable by means of a well-known Internet name (therefore, no awareness phase is needed). Also, application assets are preliminarily deployed to cloud servers (thus, no acquisition is needed). Finally, cloud's elasticity mechanisms take care of the (de)allocation of infrastructure or platform resources according to a SLA (allocation phase) so that cloud services can be invoked by clients (engagement phases). 

--- Edge services, in the other hand, may need to opportunistically advertise their existence (awareness phase), acquire application assets (acquisition phase), deploy them (allocation phase), before finally been able to expose the required services. Such opportunistic modality of edge computing, nonetheless, may co-exist with others in which edge services are transparently accessed through well-known Internet names and application assets are pre-acquired/deployed in order to increase the readiness of these services for applications demanding such QoS levels. 

Next, each phase of A3-E is further described and mapped to requirements from Section~\ref{sec:requirements}.

\subsubsection{Awareness Phase}\label{sec:A3-E-awareness}

In accordance with \textbf{RQx}, certain scenarios of mobile and local edge computing require the awareness of clients with respect to the existence of nearby edge services. Moreover, to support the dynamic deployment of services (performed at acquisition and allocation phases), a client must first become aware of the existence of an edge domain in order to proceed with the identification of its service requirements and ultimately by the dynamic deployment to that domain. 

\subsubsection{Acquisition Phase}\label{sec:A3-E-acquisition}

In accordance with \textbf{RQx}, 

\subsubsection{Allocation Phase}\label{sec:A3-E-allocation}

\subsubsection{Engagement Phase}\label{sec:A3-E-engagement}

The \textit{engagement} phase represents the simple interaction between a client and a service, e.g., by means of a stateless protocol such as used by RESTful services. 

At this stage, a client must be aware of the service address: 

\subsubsection{Reactive and Proactive Phase Transitions}

\begin{figure}[htbp]
	\raggedright
	\subfloat[Different states of a given edge domain with respect to a given client application; the transitions between states triggered by domain events are guarded by policies that may vary according to the type of edge infrastructure and application\label{fig:A3-E-domain}] {\includegraphics[width=0.95\textwidth]{figs/A3-E-domain.png}}\hfill
	
	\subfloat[Different states of a given client with respect to a given edge domain; the transitions between states triggered by client events are guarded by policies that may vary according to the client requirements\label{fig:A3-E-client}] {\includegraphics[width=0.95\textwidth]{figs/A3-E-client.png}}\hfill
	\caption{States and transitions among A3-E phases} \label{fig:A3-E-phases}
\end{figure}

TODO: update bellow

Fig. x presents the possible transitions among the three A phases of an edge domain regarding a given application. The awareness-acquisition transition is modelled by three alternative policies: 

\begin{itemize}

\item proactive acquisition: phase starts as soon as the edge domain becomes active; 

\item partially proactive acquisition: phase starts as soon as awareness phase finishes; or

\item reactive acquisition: phase starts as soon as awareness phase finishes and the client notifies its intention for using that domain.

\end{itemize}

The acquisition-allocation transition, in its turn, is modelled by two alternative policies: 

\begin{itemize}

\item proactive allocation: phase starts as soon as acquisition phase finishes; or

\item reactive allocation: phase starts as soon as acquisition phase finishes and the client notifies its intention for using that domain.

\end{itemize}

Finally, reverse transitions are single and dependent on the specific policies for deallocating and disposing of application assets. 
In accordance with Requirement R6, the aforementioned policies are useful for different classes of applications, as well as different types of edge computing infrastructure and different usage contexts.


TODO: discuss below how each of the aforementioned policies address specific requirements elicited in the previous section; pros-cons

\subsubsection{A3-E: Reference Architecture}\label{sec:a3-e-reference-architecture}

\begin{figure}
  \includegraphics[width=0.6\textwidth]{figs/reference-architecture.png}
  \caption{TODO}
  \label{fig:reference-architecture}
\end{figure}

\begin{figure}
	\includegraphics[height=\textheight]{figs/activities.png}
	\caption{TODO}
	\label{fig:activities}
\end{figure}

TODO: decide whether to leave activity diagram and details about HOW to perform each of the A3-E phases as part of the proposal or the evaluation; 

In accordance with requirement R1, edge domains perform the advertisement of their existence to whatever clients may be in reach. Potential clients, in their turn, must perform the discovery of edge domains. Before a given domain is found, it remains unknown to that client.

To address requirement R3 and R4, edge domains must remain free with respect to some application until the contact with a potential mobile client hosting that application. This condition refers to both the storage of application assets (e.g., code, libraries, etc), as well as the allocation of these assets for execution (e.g., deployment and instantiation of a restful application). 

Once a given domain has been discovered, the client must proceed with the identification of the application it is running. This process enables the edge domain to download whatever assets required by that specific application.  

The acquisition of application components does not make them ready to be executed. Instead, valuable resources like memory and CPU are kept free w.r.t. this application until the domain proceed with the placement of the application components as part of the allocation phase. The later activity corresponds to the allocation of resources from one or more domain servers required for the application execution. 	

Finally, once the allocation phase is finished, the domain is ready to perform the computation required by the application. For instance, following a request-response protocol, clients can fire requisitions to that domain. These activities are part of the engagement phase.

The separation of phases emphasizes not only the different concerns involved, but also the distinction between the moments they occur. The transition among phases may either be sequential, meaning that one phase starts as soon the previous finishes, or conditional, meaning that additional condition(s) must be met before the next phase can start. 	

%the client applications hosted by a mobile devices interact with a domain through a client middleware; the domain has its own middleware responsible for the activities in the A3-E model and interfaces with the servers in that domain


\begin{figure}
  \includegraphics[width=0.6\textwidth]{figs/protocols.png}
  \caption{TODO}
  \label{fig:protocols}
\end{figure}

