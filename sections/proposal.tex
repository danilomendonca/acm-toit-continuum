\section{Proposal}\label{sec:proposal}

\include{sections/requirements}

\subsection{The A3-E Model}

To address the requirements R[1-8], we propose a unified model from which concrete models corresponding to different scenarios of edge computing are later instantiated. First, the interaction between potential clients and edge servers is decomposed into phases (Section~\ref{sec:a3-e-phases}). Each phase is characterized by a main activity from both sides. These activities are later refined with an activity diagram (Section~\ref{sec:a3-e-activities}). Finally, a reference architecture is provided (Section~\ref{sec:a3-e-reference-architecture}).

%For instance, an edge domain could be composed of a grid of powerful servers at a cellular base station or a single cloudlet unit at some public event area. Also, it could be one or more single-board computer in a working office. 

From this point on, the term edge domain is used to abstract whatever computational resources can be employed by different edge infrastructure types and locations. It is also implied that edge domains are accessible by mobile clients through some (network) access point. Fig.~\ref{fig:edge-domain-client} illustrate this abstraction.

\begin{figure}
  \includegraphics[width=0.5\textwidth]{figs/edge-domain-client.png}
  \caption{Computational resources abstracted under different edge domains; a mobile client within connection range to edge domains A and B through access points A and B}
  \label{fig:edge-domain-client}
\end{figure}

\subsubsection{A3-E: Phases}\label{sec:a3-e-phases}

\begin{figure}[htbp]
	\centering
	\captionsetup[subfigure]{width=\textwidth}
	\subfloat[Different phases of the A3-E model; phases are delimited by vertical lines and the main activity of each phase by the label within each phase; labels within parenthesis represent the states of a domain (client) with respect to a client (domain)\label{fig:a3-3-phases}]{ \includegraphics[width=0.9\textwidth]{figs/A3-E.png}}\hfill
	
	\raggedright
	\subfloat[Different states of a given edge domain with respect to a given client application; the transitions between states triggered by domain events are guarded by policies that may vary according to the type of edge infrastructure and application\label{fig:A3-E-domain}] {\includegraphics[width=0.95\textwidth]{figs/A3-E-domain.png}}\hfill
	
	\subfloat[Different states of a given client with respect to a given edge domain; the transitions between states triggered by client events are guarded by policies that may vary according to the client requirements\label{fig:A3-E-client}] {\includegraphics[width=0.95\textwidth]{figs/A3-E-client.png}}\hfill
	\caption{The A3-E Model} \label{fig:a3-3-model}
\end{figure}


%\begin{figure}
%  \includegraphics[width=0.9\textwidth]{figs/A3-E.png}
%  \caption{Different phases of the A3-E model; phases are delimited by vertical lines and the main activities by inner labels in both clients and domains; labeled oval shapes represent the respective states of both sides at the end of each phase}
%  \label{fig:A3-E}
%\end{figure}
%
%\begin{figure}
%  \includegraphics[width=0.95\textwidth]{figs/A3-E-states.png}
%  \caption{Different states of a given edge domain with respect to a given application; the transitions between awareness, acquisition, and allocation are guarded by policies that may vary according to the type of application and to the type of edge infrastructure}
%  \label{fig:states}
%\end{figure}

The diagrams in Fig.~\ref{fig:a3-3-phases} captures the different phases of the interaction between a mobile client running a given application that first contacts a given edge domain. 
	
In accordance with requirement R1, edge domains perform the advertisement of their existence to whatever clients may be in reach. Potential clients, in their turn, must perform the discovery of edge domains. Before a given domain is found, it remains unknown to that client.

To address requirement R3 and R4, edge domains must remain free with respect to some application until the contact with a potential mobile client hosting that application. This condition refers to both the storage of application assets (e.g., code, libraries, etc), as well as the allocation of these assets for execution (e.g., deployment and instantiation of a restful application). 

Once a given domain has been discovered, the client must proceed with the identification of the application it is running. This process enables the edge domain to download whatever assets required by that specific application.  

The acquisition of application components does not make them ready to be executed. Instead, valuable resources like memory and CPU are kept free w.r.t. this application until the domain proceed with the placement of the application components as part of the allocation phase. The later activity corresponds to the allocation of resources from one or more domain servers required for the application execution. 	

Finally, once the allocation phase is finished, the domain is ready to perform the computation required by the application. For instance, following a request-response protocol, clients can fire requisitions to that domain. These activities are part of the engagement phase.

The separation of phases emphasizes not only the different concerns involved, but also the distinction between the moments they occur. The transition among phases may either be sequential, meaning that one phase starts as soon the previous finishes, or conditional, meaning that additional condition(s) must be met before the next phase can start. 	

Fig. x presents the possible transitions among the three A phases of an edge domain regarding a given application. The awareness-acquisition transition is modelled by three alternative policies: 

\begin{itemize}

\item proactive acquisition: phase starts as soon as the edge domain becomes active; 

\item partially proactive acquisition: phase starts as soon as awareness phase finishes; or

\item reactive acquisition: phase starts as soon as awareness phase finishes and the client notifies its intention for using that domain.

\end{itemize}

The acquisition-allocation transition, in its turn, is modelled by two alternative policies: 

\begin{itemize}

\item proactive allocation: phase starts as soon as acquisition phase finishes; or

\item reactive allocation: phase starts as soon as acquisition phase finishes and the client notifies its intention for using that domain.

\end{itemize}

Finally, reverse transitions are single and dependent on the specific policies for deallocating and disposing of application assets. 
In accordance with Requirement R6, the aforementioned policies are useful for different classes of applications, as well as different types of edge computing infrastructure and different usage contexts.


TODO: discuss below how each of the aforementioned policies address specific requirements elicited in the previous section; pros-cons

\subsubsection{A3-E: Refined Activities}\label{sec:a3-e-activities}

\begin{figure}
  \includegraphics[height=\textheight]{figs/activities.png}
  \caption{TODO}
  \label{fig:activities}
\end{figure}

\subsubsection{A3-E: Reference Architecture}\label{sec:a3-e-reference-architecture}

\begin{figure}
  \includegraphics[width=0.6\textwidth]{figs/reference-architecture.png}
  \caption{TODO}
  \label{fig:reference-architecture}
\end{figure}

%the client applications hosted by a mobile devices interact with a domain through a client middleware; the domain has its own middleware responsible for the activities in the A3-E model and interfaces with the servers in that domain


\begin{figure}
  \includegraphics[width=0.6\textwidth]{figs/protocols.png}
  \caption{TODO}
  \label{fig:protocols}
\end{figure}
